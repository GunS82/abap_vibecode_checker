# ABAP Objects Parser

🔍 **нализатор зависимостей ABAP кода** - инструмент для извлечения и анализа зависимостей из ABAP программ.

## 📋 писание

ABAP Objects Parser - это Python-инструмент для статического анализа ABAP кода, который извлекает:

- 🏗️ **лассы и интерфейсы** - зависимости от объектно-ориентированных компонентов
- 🔧 **ункции** - вызовы функциональных модулей и BAPI
- 🗄️ **Таблицы ** - обращения к таблицам базы данных
- 📊 **DDIC объекты** - структуры данных, домены и другие объекты словаря данных

## ✨ озможности

- ⚡ **ыстрый анализ** - обработка файлов любого размера
- 📁 **акетная обработка** - анализ целых папок с ABAP программами
- 🎯 **роверка существования** - сверка найденных объектов с базовыми списками
- 📊 **етальная статистика** - подробные отчеты по категориям зависимостей
- 💾 **JSON выход** - структурированные результаты для дальнейшей обработки
- 🔍 **мная фильтрация** - исключение внутренних таблиц и системных объектов

## 🚀 становка

### Требования
- Python 3.8+
- перационная система: Windows, Linux, macOS

### ыстрая установка

```bash
# лонирование репозитория
git clone https://github.com/your-username/abap-parser.git
cd abap-parser

# становка базовой версии (только стандартные библиотеки)
pip install -e .

# становка с зависимостями для анализа
pip install -e .[analysis]

# становка всех зависимостей (включая dev-инструменты)
pip install -e .[all]
```

### льтернативная установка

```bash
# становка только необходимых зависимостей для анализа папок
pip install tabulate pandas
```

## 📖 спользование

### нализ отдельного файла

```bash
# азовый анализ
python abap_objects_parser.py "path/to/your/program.abap"

# ример вывода
{
  "classes_and_interfaces": ["CL_SALV_TABLE", "CX_ROOT"],
  "functions": ["BAPI_TRANSACTION_COMMIT", "REUSE_ALV_GRID_DISPLAY"],
  "database_tables": ["VBFA", "MARA", "KNA1"],
  "other_ddic_dependencies": ["SLIS_FIELDCAT_ALV", "BAPIRET2"]
}
```

### нализ папки с программами

```bash
# нализ всех ABAP файлов в папке
python folder_analyzer.py "path/to/abap/programs"

# езультат: детальный отчет + JSON файл с результатами
```

### ример вывода анализатора папки

```
============================================================
: example_program.abap
============================================================
сего объектов: 25
азмер файла: 15420 байт
ремя парсинга: 0.045 сек

--- лассы и интерфейсы (2) ---
✅  базе:
   • CL_SALV_TABLE
   • CX_ROOT

--- ункции (8) ---
✅  базе:
   • BAPI_TRANSACTION_COMMIT
   • REUSE_ALV_GRID_DISPLAY
❌ е в базе:
   • CUSTOM_FUNCTION_MODULE

--- Таблицы  (5) ---
✅  базе:
   • VBFA
   • MARA
```

## 📁 Структура проекта

```
abap-parser/
├── abap_objects_parser.py    # сновной парсер
├── folder_analyzer.py        # нализатор папок
├── pyproject.toml           # онфигурация проекта
├── requirements.txt         # ависимости (legacy)
├── README.md               # окументация
├── Base/                   # азовые списки объектов
│   ├── classes.txt         # Список классов/интерфейсов
│   ├── functions.txt       # Список функций
│   └── tables.txt         # Список таблиц 
├── LLM ABAP Programs/      # Тестовые программы (LLM)
└── Real ABAP Programs/     # еальные ABAP программы
```

## ⚙️ онфигурация

### азовые списки объектов

арсер использует файлы в папке `Base/` для проверки существования найденных объектов:

- **classes.txt** - список известных классов и интерфейсов
- **functions.txt** - список функциональных модулей
- **tables.txt** - список таблиц базы данных

### оддерживаемые расширения файлов

- `.abap` - стандартные ABAP программы
- `.txt` - текстовые файлы с ABAP кодом

## �� азработка

### становка dev-зависимостей

```bash
pip install -e .[dev]
```

### апуск тестов

```bash
pytest
```

### орматирование кода

```bash
black .
ruff check .
```

### роверка типов

```bash
mypy .
```

## 📊 римеры результатов

### Статистика анализа папки

```json
{
  "input_folder": "Real ABAP Programs",
  "total_files": 6,
  "successful_files": 6,
  "summary_statistics": {
    "total_objects_by_category": {
      "classes_and_interfaces": 7,
      "functions": 51,
      "database_tables": 52,
      "other_ddic_dependencies": 120
    },
    "unique_objects_by_category": {
      "classes_and_interfaces": 7,
      "functions": 49,
      "database_tables": 49,
      "other_ddic_dependencies": 117
    }
  }
}
```

## 🤝 клад в проект

1. оркните репозиторий
2. Создайте ветку для новой функции (`git checkout -b feature/amazing-feature`)
3. афиксируйте изменения (`git commit -m 'Add amazing feature'`)
4. тправьте в ветку (`git push origin feature/amazing-feature`)
5. ткройте Pull Request

## 📝 ицензия

тот проект распространяется под лицензией MIT. См. файл `LICENSE` для подробностей.

## 🐛 Сообщения об ошибках

сли вы нашли ошибку или у вас есть предложения по улучшению, пожалуйста, создайте [issue](https://github.com/your-username/abap-parser/issues).

## 📈 роизводительность

- ⚡ **Скорость**: ~400KB файл обрабатывается за ~0.9 секунды
- 💾 **амять**: инимальное потребление благодаря потоковой обработке
- 🔄 **асштабируемость**: оддержка пакетной обработки сотен файлов

## 🏷️ ерсии

- **v1.0.0** - ервый стабильный релиз
  - сновной функционал парсинга
  - нализ папок
  - JSON отчеты
  - азовая проверка существования объектов

---

**Создано с ❤️ для сообщества ABAP разработчиков**
